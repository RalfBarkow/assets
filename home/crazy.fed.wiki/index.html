<!-- propt for potential member information -->

<center>
  <h1>The Crazy Wiki Place</h1>
  <p>We're not taking new members yet. Stay tuned.</p>
  <p><input id=email type=email placeholder="let us email you when we are open" size=40>
  <button onclick=doit(event)>ok</button></p>
  <p id=result></p>
  <script type=module>
    // https://developer.mozilla.org/en-US/docs/Learn/Forms/Form_validation#validating_forms_using_javascript
    window.doit = async event => {
      window.result.innerText = 'working'
      if (!window.email.validity.valid) {
        window.result.innerText = window.email.validationMessage
        return
      }
      const email = window.email.value || 'missing'
      const result = await fetch('/plugin/register/custom', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({context:'hello', data:{email}})
      }).then(res => res.text());
      console.log(result)
      window.result.innerText = result
    }
    window.result.innerText = 'ready'
  </script>
</center>