<div id=result>working</div>
<script type=module>

  // Built from new-page-from-file.html
  // http://code.fed.wiki/frame-script-outlines.html

  import * as frame from 'http://code.fed.wiki/assets/v1/frame.js'

  const neighbors = await frame.neighbors()

  window.dopreview = event => {
    const title = "Roster of Neighbors"
    const text = 'Generated by [[Make Roster]]'
    const story = [
      {type:'paragraph',text},
      {type:'roster',text:neighbors.join("\n")}
    ]
    frame.open({title,story},event.shiftKey)
  }

  window.result.innerHTML = `
    ${neighbors.length} sites
    <button onclick=dopreview(event)>preview</button>
  `
</script>