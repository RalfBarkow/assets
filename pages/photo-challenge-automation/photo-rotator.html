<table>
  <tr><td><td>
  <tr><td><td>
  <tr><td><td>
</table>

<style>
  table {width: 100%; table-layout: fixed;}
  img {width: 100%}
</style>

<script type=module>

  import * as frame from 'http://code.fed.wiki/assets/v1/frame.js'
  import * as index from ''
  const site = `photos.ward.dojo.fed.wiki`
  const assets = `http://${site}/assets`
  const index = await fetch(`${assets}/image-index.json`).then(res => res.json())

  document.querySelector('table').addEventListener('click', event => {
    const title = event.target.getAttribute('title')
    const message = {action:"doInternalLink", title, keepLineup: event.shiftKey}
    window.parent.postMessage(message, "*")
  })

  const images = []
  for (const folder in json)
    for (const trail in json[folder])
      for (const image of json[folder][trail])
        images.push({trail,folder,image})
  const i=0
  while(i<6) show()
  setInterval(show,2000)

  function show() {
    const td = document.querySelectorAll('td')[i++%6]
    const {trail,folder,image} = images[Math.floor(Math.random() * images.length)]
    const src = `${assets}/${folder}/${image}`
    const img = new Image()
    img.addEventListener('load', () => td.innerHTML = `<img src="${src}" title="${trail}">`)
    img.src = src
  }

</script>