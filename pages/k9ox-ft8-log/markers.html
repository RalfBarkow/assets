<html>
  <body style="font-family:sans-serif;">
    <pre id=log style="border-spacing:8px;"></pre>
    <script>
  
      fetch('http://found.ward.bay.wiki.org/assets/pages/k9ox-ft8-log/wsjtx_log.adi')
        .then(res=>res.text())
        .then(text=>parse(text.split(/\r?\n/)))

      function parse(lines) {
        let report = []
        for (let line of lines) {
          if (!line.match(/^</)) continue 
          let field = /<(\w+):\d+>([^<]*)/g
          let record = {}
          while (m = field.exec(line)) {
            record[m[1]] = m[2].trim()
          }
          let grid = record.gridsquare
          let alp = 'A'.charCodeAt(0)
          let num = '0'.charCodeAt(0)
          let lat = (grid.charCodeAt(1)-alp)*10-90 + (grid.charCodeAt(3)-num)*1 + 0.5 + 1*(Math.random()*0.1).toFixed(3)
          let lon = (grid.charCodeAt(0)-alp)*20-180 + (grid.charCodeAt(2)-num)*2 + 1  + -1*(Math.random()*0.2).toFixed(3)
          report.push(`${lat}, ${lon} ${record.call}`)
          // report.push(`<tr>
          //   <td>${record.qso_date}
          //   <td>${record.time_on}
          //   <td>${record.call}
          //   <td>${record.gridsquare}
          //   <td>${record.rst_sent}
          //   <td>${record.rst_rcvd}
          // `)
        }
        log.innerHTML = report.join("\n")
      }

    </script>
  </body>
</html>      